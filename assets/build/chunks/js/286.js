"use strict";(globalThis.webpackChunkpoptics=globalThis.webpackChunkpoptics||[]).push([[286],{609:(e,t,a)=>{a.d(t,{J:()=>i});var n=a(51609),l=a(36877),s=a(38915);const{__}=wp.i18n,i=({type:e,className:t=""})=>{const{icon:a=null,term_name:i="",name:p=""}=e||{};return p||i?(0,n.createElement)("div",{className:"pt-popup-type-outline"},(0,n.createElement)("div",{className:`pt-types-wrapper ${t}`},a?(0,n.createElement)(l.A,{alt:__("logo","poptics"),size:20,src:a}):null,(0,n.createElement)(s.Text,{text:i||p}))):null}},13225:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(51609),l=a(38915),s=a(21863);const{__}=wp.i18n,i=()=>(0,n.createElement)("div",{className:"pt-filter-by"},(0,n.createElement)(s.ListFilterIcon,null),(0,n.createElement)(l.Text,{text:__("Filter By","poptics")}))},10309:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(51609),l=a(36400),s=a(39739),i=a(38915);const{__}=wp.i18n,p=(e,t,a)=>"prev"===t?(0,n.createElement)(i.Button,{"aria-label":__("previous button","poptics"),className:"pt-pagination-btn",text:__("Previous","poptics"),icon:(0,n.createElement)(l.A,null)}):"next"===t?(0,n.createElement)(i.Button,{"aria-label":__("next button","poptics"),className:"pt-pagination-btn",text:__("Next","poptics"),icon:(0,n.createElement)(s.A,null),iconPosition:"end"}):a},42759:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(51609),l=a(86087),s=a(38915),i=a(21863);const{__}=wp.i18n,p=({searchFunc:e,placeholder:t})=>{const[a,p]=(0,l.useState)(!1),c=function(e,t){let a;return function(t){let n=this;clearTimeout(a),a=setTimeout((async()=>{p(!0),(await e.apply(n,[{search_key:t}])).complete&&p(!1)}),500)}}(e);return(0,n.createElement)(s.Input,{disabled:a,size:"large",className:"pt-search-input",placeholder:t||__("Search","poptics"),prefix:(0,n.createElement)(i.SearchIcon,{color:"#6B7280"}),onChange:e=>c(e.target.value)})}},16077:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(51609),l=a(38915);const{__}=wp.i18n,s=e=>{const{total:t,paged:a,per_page:s}=e,i=(a-1)*s+1,p=Math.min(a*s,t);return(0,n.createElement)(l.Text,{className:"pt-campaign-count-text",text:__(`Showing ${i||""} to ${p||""} of ${t} entries`,"poptics")})}},55713:(e,t,a)=>{a.d(t,{G:()=>s,v:()=>i});var n=a(81906);const l=a.p+"chunks/images/popup.jpg",{__}=wp.i18n,s={image:l,videoId:"DQacCB9tDaw?si=Hf2-sd3DjUbqdPxY",title:__("Create Your First Popup","poptics"),description:__("Let's explore the ultimate popup mix to boost your website's conversions.","poptics"),listItem:[__("Niche based layout","poptics"),__("Lightweight design","poptics"),__("Gutenberg compatibility","poptics"),__("Sales analytics","poptics")],btnText:__("Create First Popup Campaign","poptics"),btnLink:n.mX},i={draft:"pt-default-badge",active:"pt-primary-badge",publish:"pt-primary-badge",paused:"pt-warning-badge",completed:"pt-success-badge",scheduled:"pt-outline-badge",trash:"pt-trash-badge"}},36110:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Q});var n=a(51609),l=a(86087),s=a(47152),i=a(16370),p=a(50400),c=a(38915),o=a(47767);const{__}=wp.i18n,r=({data:e})=>{const t=(0,o.Zp)();return(0,n.createElement)("div",{className:"pt-empty-page-wrapper"},(0,n.createElement)(s.A,{span:!0,gutter:[48,16],justify:"center",align:"top"},(0,n.createElement)(i.A,{xs:24,md:14},(0,n.createElement)(c.Img,{src:e?.image,alt:__("popup dummy image","poptics")})),(0,n.createElement)(i.A,{xs:24,md:10},(0,n.createElement)(c.Title,{level:3,className:"pt-empty-page-title",text:e?.title}),(0,n.createElement)(c.Text,{className:"pt-empty-page-description",text:e?.description}),(0,n.createElement)("ul",null,e?.listItem?.map(((e,t)=>(0,n.createElement)("li",{key:t},e)))),(0,n.createElement)(p.Ay,{"aria-label":__("empty screen button","poptics"),type:"primary",size:"large",onClick:()=>{t(e?.btnLink)}},e?.btnText))))};var m=a(92911),u=a(90070),g=a(42759),d=a(13225),y=a(21437),_=a(46023);const{paged:E,per_page:h}=_.pagination,b=(0,l.createContext)(),v=function(){const e=(0,l.useContext)(b),{setCampaignStates:t,searchQuery:a}=e,{per_page:n,paged:s}=_.pagination,i=async(e={})=>{const l={...a,per_page:n,paged:s,...e,enableSearch:!0};try{const a=await(y.A?.campaign?.allCampaigns(l));a?.success&&t((t=>({...t,per_page:n,paged:s,campaignTypes:a?.data?.types||[],campaignGoals:a?.data?.goals||[],statusList:a?.data?.status_count||{},campaignList:a?.data?.items,total:a?.data?.total,searchQuery:{...t.searchQuery,...e}})))}catch(e){console.log(e)}finally{return{complete:!0}}};return{updateCampaign:async(e,a)=>{try{const n=await(y.A?.campaign?.updateCampaign(e,a));n?.success&&t((t=>{const n=t.campaignList?.map((t=>t.id===e?{...t,...a}:t));return{...t,campaignList:n}}))}catch(e){console.log(e)}},getCampaigns:i,deleteSingleCampaign:async e=>{try{const a=await(y.A?.campaign?.deleteSingleCampaign(e));a?.success&&t((t=>({...t,campaignList:t.campaignList?.filter((t=>t.id!==e))})))}catch(e){console.log(e)}},bulkDeleteCampaign:async(e=[])=>{try{const t=await(y.A?.campaign?.bulkDeleteCampaign(e));t?.success&&i({per_page:a.per_page,paged:a.paged})}catch(e){console.log(e)}finally{return{complete:!0}}},duplicateCampaign:async e=>{try{const a=await(y.A?.campaign?.cloneCampaign(e));a?.success&&t((e=>({...e,campaignList:[a?.data,...e.campaignList],total:e.total+1})))}catch(e){console.log(e)}}}},{__:C}=wp.i18n,w=()=>{const e=(0,l.useContext)(b),{campaignTypes:t=[],campaignGoals:a=[],statusList:s={}}=e,{getCampaigns:i}=v(),p=e=>{i(e)},o=[{label:C("All","poptics"),value:""}],r=[...o,...Object.entries(s).map((([e,t])=>({value:e,label:(0,n.createElement)(m.A,{className:"pt-campaign-status",key:e},e,(0,n.createElement)(c.Badge,{overflowCount:99,count:t}))})))],u=[...o,...a],g=[...o,...t];return(0,n.createElement)(m.A,{wrap:!0,gap:"small",justify:"space-between"},(0,n.createElement)(c.SelectInput,{placeholder:C("Popup Status","poptics"),options:r,className:"pt-campaign-status-select-filter",size:"large",onChange:e=>{p({status:e})}}),(0,n.createElement)(m.A,{gap:"small",justify:"flex-end",wrap:!0},(0,n.createElement)(d.A,null),(0,n.createElement)(c.SelectInput,{placeholder:C("Campaign Goal","poptics"),options:u.map((e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:e.term_id,label:e.label||e.name}})),size:"large",className:"pt-campaign-status-select-filter",onChange:e=>{p({goal:e})}}),(0,n.createElement)(c.SelectInput,{placeholder:C("Popup Type","poptics"),options:g.map((e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:e.term_id,label:e.label||e.name}})),size:"large",className:"pt-campaign-status-select-filter",onChange:e=>{p({type:e})}})))};var x=a(81906),k=a(609),f=a(21863);const{__:A}=wp.i18n,S=({record:e})=>{const{duplicateCampaign:t,deleteSingleCampaign:a,updateCampaign:l}=v(),s=(0,o.Zp)(),i=()=>{s(`/campaign/${e?.id}/update`)},p=[{key:"edit",label:A("Edit","poptics"),icon:(0,n.createElement)(f.EditOutlineIcon,null),onClick:()=>i()},{key:"clone",label:A("Duplicate ","poptics"),icon:(0,n.createElement)(f.CloneIcon,null),onClick:()=>t(e?.id)},{key:"trash",label:A("Trash","poptics"),icon:(0,n.createElement)(f.DeleteIcon,null),onClick:()=>l(e?.id,{status:"trash"})},{key:"permanent_delete",label:A("Delete Permanently","poptics"),icon:(0,n.createElement)(f.EmptyTrashIcon,null),onClick:()=>a(e?.id)}];return(0,n.createElement)(m.A,{gap:"small",justify:"end"},"draft"===e?.status?(0,n.createElement)(c.Button,{"aria-label":A("finish editing","poptics"),className:"pt-light-btn",text:A("Finish Editing","poptics"),onClick:i}):null,(0,n.createElement)(c.Dropdown,{menu:{items:p},placement:"bottom"},(0,n.createElement)(c.Button,{"aria-label":A("more icon","poptics"),type:"text",text:(0,n.createElement)(f.MoreIcon,null)})))};var N=a(55713),T=a(84976);const{__:I}=wp.i18n;var L=a(10309),B=a(9795),P=a(16077);const{__:z}=wp.i18n,D=()=>{const[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)(!1),{getCampaigns:p,bulkDeleteCampaign:o}=v(),{modal:r}=B.A.useApp(),m=(0,l.useContext)(b),{searchQuery:g,campaignList:d,total:y}=m,{per_page:E,paged:h}=g,{columns:C}={columns:[{title:I("Popups","poptics"),dataIndex:"name",key:"name",render:(e,t)=>(0,n.createElement)(T.N_,{to:`/campaign/${t?.id}/update`},(0,n.createElement)(c.Title,{level:5,text:t?.name})),width:window.innerWidth<=1200&&300,fixed:"left"},{title:I("Type","poptics"),dataIndex:"type",key:"type",render:(e,t)=>(0,n.createElement)(k.J,{type:t.type})},{title:I("Views","poptics"),dataIndex:"analytics_details",key:"total_views",render:(e,t)=>t?.analytics_details?.total_views||0,sorter:(e,t)=>(e?.analytics_details?.total_views||0)-(t?.analytics_details?.total_views||0)},{title:I("Conversion","poptics"),dataIndex:"analytics_details",key:"total_conversions",render:(e,t)=>t?.analytics_details?.total_conversions||0,sorter:(e,t)=>(e?.analytics_details?.total_conversions||0)-(t?.analytics_details?.total_conversions||0)},{title:I("Conversion Rate","poptics"),dataIndex:"analytics_details",key:"total_conversion_rate",render:(e,t)=>parseFloat(t?.analytics_details?.total_conversion_rate.toFixed(2))||0,sorter:(e,t)=>(e?.analytics_details?.total_conversion_rate||0)-(t?.analytics_details?.total_conversion_rate||0)},{title:I("Status","poptics"),dataIndex:"status",key:"status",render:(e,t)=>{const a=t?.status;return(0,n.createElement)(c.Badge,{count:a,className:`pt-campaign-status-badge ${N.v[a]}`})}},{title:I("Actions","poptics"),key:"action",align:"right",render:(e,t)=>(0,n.createElement)(S,{record:t})}]},{pageSizeOptions:w}=_.pagination,x={selectedRowKeys:e,onChange:e=>{t(e)}};return(0,n.createElement)(n.Fragment,null,e.length>0?(0,n.createElement)(u.A,{className:"pt-bulk-delete"},(0,n.createElement)(c.Button,{"aria-label":z("bulk delete button","poptics"),danger:!0,onClick:()=>{r.confirm({title:z("Are you sure delete selected staffs?","poptics"),okText:z("Yes","poptics"),okType:"danger",cancelText:z("No","poptics"),onOk:()=>(async()=>{i(!0),await o(e),t([]),i(!1)})()})},text:z("Bulk Delete","poptics"),loading:a}),e.length,z("items selected","poptics")):null,(0,n.createElement)(c.Table,{rowSelection:{...x},columns:C,dataSource:d,rowKey:e=>e?.id,...window.innerWidth<=1200&&{scroll:{y:"calc(100vh - 250px)",x:1400}},pagination:!1,className:"pt-campaign-table",loading:!d}),(0,n.createElement)(s.A,{justify:"space-between",gutter:[0,15]},(0,n.createElement)(P.A,{per_page:E,paged:h,total:y}),(0,n.createElement)(c.Pagination,{defaultPageSize:E,showSizeChanger:!0,onChange:(e,t)=>{p({paged:e,per_page:t})},total:y,itemRender:L.A,pageSizeOptions:w})))},{__:F}=wp.i18n,j=()=>{const{getCampaigns:e}=v(),t=(0,o.Zp)();return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(m.A,{vertical:!0,gap:16},(0,n.createElement)(m.A,{justify:"space-between",gap:"small",wrap:!0},(0,n.createElement)(c.Title,{level:3,text:F("Popups Campaign","poptics"),className:"pt-page-heading"}),(0,n.createElement)(u.A,{size:"small"},(0,n.createElement)(g.A,{placeholder:F("Search Campaign","poptics"),searchFunc:e}),(0,n.createElement)(c.Button,{size:"large",type:"primary","aria-label":F("Bulk Delete","poptics"),text:F("Create Campaign","poptics"),onClick:()=>t(x.mX)}))),(0,n.createElement)(w,null),(0,n.createElement)(D,null)))},Q=($=()=>{const{campaignList:e,searchQuery:t}=(0,l.useContext)(b),{paged:a,per_page:s}=t,{getCampaigns:i}=v();(0,l.useEffect)((()=>{i({paged:a,per_page:s})}),[]);const p=""!==t.search_key||""!==t.type||""!==t.goal||""!==t.status;return(0,n.createElement)(c.RowSkeleton,{rows:s,loading:!e},e?.length>0||p?(0,n.createElement)(j,null):(0,n.createElement)(r,{data:N.G}))},e=>{const[t,a]=(0,l.useState)({campaignList:null,total:null,searchQuery:{search_key:"",type:"",goal:"",status:"",paged:E,per_page:h}});return(0,n.createElement)(b.Provider,{value:{...t,setCampaignStates:a}},(0,n.createElement)($,{...e}))});var $}}]);