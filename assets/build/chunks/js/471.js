"use strict";(globalThis.webpackChunkpoptics=globalThis.webpackChunkpoptics||[]).push([[471],{62471:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ue});var n=a(51609),l=a(21437),i=a(38915),c=a(21863),r=a(86087);const s=(0,r.createContext)(),{__}=wp.i18n,o=()=>{const{campaignList:e}=(0,r.useContext)(s),t=e?.map((e=>({value:e?.id,label:e?.name})));return t?.unshift({label:__("All Campaign","poptics"),value:""}),t},m={View:"#A0B7D6",Conversion:"#2563EB",Visitors:"#000000"},p={View:"#B8D5C1",Conversion:"#16A34A",Visitors:"#000000"},d={View:"#A0B7D6",Conversion:"#9333EA",Visitors:"#000000"},u=(e,t)=>e.map((e=>({...e,fill:t[e.name]}))),g="monthly",E="weekly",y="lastWeek",x="lastMonth",w="lastYear",h="yearly",D="custom",b=(e,t,a)=>{const n=new Date,l=n.getFullYear(),i=n.getMonth()+1,c=n.getDay();switch(e){case g:t=new Date(l,i-1,1),a=new Date(l,i,0);break;case E:const e=0===c?6:c-1;(t=new Date(n)).setDate(n.getDate()-e),(a=new Date(t)).setDate(t.getDate()+6);break;case y:(a=new Date(n)).setDate(n.getDate()-c-1),(t=new Date(a)).setDate(a.getDate()-6);break;case x:const r=new Date(n.getFullYear(),n.getMonth(),1);(a=new Date(r)).setDate(0),t=new Date(a.getFullYear(),a.getMonth(),1);break;case h:t=new Date(l,0,1),a=new Date(l,11,31);break;case w:const s=l-1;t=new Date(s,0,1),a=new Date(s,11,31);break;case D:t=new Date(t),a=new Date(a);break;default:t=new Date(l,i-1,1),a=new Date(l,i,0)}const r={year:"numeric",month:"2-digit",day:"2-digit"};return`${new Intl.DateTimeFormat("en-CA",r).format(t)}~${new Intl.DateTimeFormat("en-CA",r).format(a)}`},v=[{label:(0,n.createElement)(i.Text,{text:__("This week","poptics"),className:"pt-analytics-dropdown-text"}),value:b(E)},{label:(0,n.createElement)(i.Text,{text:__("Last Week","poptics"),className:"pt-analytics-dropdown-text"}),value:b(y)},{label:(0,n.createElement)(i.Text,{text:__("This Month","poptics"),className:"pt-analytics-dropdown-text"}),value:b(g)},{label:(0,n.createElement)(i.Text,{text:__("Last Month","poptics"),className:"pt-analytics-dropdown-text"}),value:b(x)},{label:(0,n.createElement)(i.Text,{text:__("This Year","poptics"),className:"pt-analytics-dropdown-text"}),value:b(h)},{label:(0,n.createElement)(i.Text,{text:__("Last Year","poptics"),className:"pt-analytics-dropdown-text"}),value:b(w)}],A=()=>{const{dateRange:e}=(0,r.useContext)(s);return(e=>{e=""===e?b():e;const[t,a]=e?.split("~").map((e=>new Date(e))),n=[];if(t.getFullYear()===a?.getFullYear())if(t.getMonth()===a?.getMonth()){const e={day:"numeric",month:"short"};if(t.getDate()===a?.getDate())n.push(new Intl.DateTimeFormat("en-US",e).format(new Date(t.getFullYear(),t.getMonth(),t.getDay())));else for(let l=t.getDate();l<=a.getDate();l++)n.push(new Intl.DateTimeFormat("en-US",e).format(new Date(t.getFullYear(),t.getMonth(),l)))}else for(let e=t.getMonth();e<=a.getMonth();e++){let t=new Date(0,e).toLocaleString("en-US",{month:"short"});n.push(t)}else for(let e=t.getFullYear();e<=a.getFullYear();e++)n.push(e.toString());return n})(e).map((e=>({period:e,impressions:"0",conversion:"0"})))},f=[{title:__("Top Country","poptics"),tableHeader:{typeOfHeading:"textOnly",title:__("Countries","poptics")}},{title:__("Top Pages","poptics"),tableHeader:{typeOfHeading:"icon",title:__("Pages","poptics")}},{title:__("Top Browsers","poptics"),tableHeader:{typeOfHeading:"textOnly",title:__("Browsers","poptics")}}],k=function(){let{setAnalyticsStates:e,campaignId:t,dateRange:a}=(0,r.useContext)(s);return""===a&&(a=b()),{getAnalytics:async(n={})=>{let i={campaign_id:t,date_range:a,...n};try{const t=await l.A.analytics.getAnalytics(i);t.success&&e((e=>({...e,cardViewData:t?.data?.data_for_card_view,statisticalAnalysis:t?.data?.statistical_analytics,pieDataDesktop:t?.data?.device_based_analytics_info_for_pie_chart?.pie_data_desktop,pieDataOthers:t?.data?.device_based_analytics_info_for_pie_chart?.pie_data_others,pieDataMobile:t?.data?.device_based_analytics_info_for_pie_chart.pie_data_mobile})))}catch(e){console.error("Error fetching analytics data:",e)}},getCampaigns:async()=>{try{const t=await l.A.campaign.allCampaigns({});t.success&&e((e=>({...e,campaignList:t?.data?.items})))}catch(e){console.log("Error fetching campaigns data:",e)}}}};var _=a(68676),C=a(92911),T=a(47152),N=a(16370),F=a(93644),I=a(44653),M=a(41313),S=a(69107),Y=a(77984),B=a(23495),O=a(1068),V=a(97018),L=a(91222),R=a(86279),H=a(30630),j=a(63161),P=a(91706);const{__:U}=wp.i18n,z=({data:e})=>{const t=0===e.length;return(0,n.createElement)("div",{className:"pt-composed-chart-container"},(0,n.createElement)(I.u,null,(0,n.createElement)(M.X,{width:1200,height:400,data:t?A():e},t?(0,n.createElement)(S.d,{stroke:"#f5f5f5"}):null,(0,n.createElement)(Y.W,{dataKey:"period",angle:-30,axisLine:t,tickLine:!1}),(0,n.createElement)(B.h,{axisLine:t,tickLine:!1,domain:t?[0,150]:null}),(0,n.createElement)(O.m,null),(0,n.createElement)(V.s,{layout:"horizontal",verticalAlign:"top",align:"left"}),(0,n.createElement)(L.y,{barSize:20,dataKey:"impressions",fill:"#E5E7EB",radius:[5,5,5,5]}),(0,n.createElement)(R.N,{dataKey:"conversion",stroke:"#2563EB",type:"monotone"}))))},$=({backgroundColor:e})=>(0,n.createElement)("div",{className:"pt-pie-legend-bullet",style:{backgroundColor:e}}),K=({viewBox:e,icon:t,text:a,data:l})=>{const{cx:i,cy:c}=e;return(0,n.createElement)("g",null,t(50,l,i,c),(0,n.createElement)("text",{x:i,y:c+25,className:"recharts-text recharts-label",textAnchor:"middle",dominantBaseline:"central",alignmentBaseline:"middle",fill:"#ff",fontSize:".75re",fontWeight:"600"},a))},W=({dataName:e,dataValue:t,fill:a})=>(0,n.createElement)(C.A,{className:"pt-pie-legend-container",justify:"space-between"},(0,n.createElement)(C.A,{items:"center",gap:"small"},(0,n.createElement)($,{backgroundColor:a}),(0,n.createElement)(i.Text,{className:"pt-pie-legend-text",text:e})),(0,n.createElement)(i.Text,{text:t})),J=({payload:e})=>{const t=e.filter((e=>"No Data Available"!==e.value));return(0,n.createElement)(F.A,{itemLayout:"horizontal",dataSource:t||[],renderItem:e=>(0,n.createElement)(F.A.Item,null,(0,n.createElement)(F.A.Item.Meta,{description:(0,n.createElement)(W,{dataName:e?.value,dataValue:e?.payload?.value,fill:e?.payload?.fill})}))})},X=e=>{const{icon:t,text:a,data:l,backgroundColor:i}=e;return(0,n.createElement)("div",{className:"pt-analytics-pie-chart-container",style:{backgroundColor:i}},(0,n.createElement)(I.u,null,(0,n.createElement)(H.r,null,(0,n.createElement)(j.F,{data:l,dataKey:"value",cx:"50%",cy:"50%",innerRadius:50,outerRadius:75},(0,n.createElement)(P.J,{content:(0,n.createElement)(K,{icon:t,text:a,data:l}),position:"center"})),(0,n.createElement)(V.s,{content:(0,n.createElement)(J,null)}))))};var q=a(1469);const G=e=>{const{title:t,item:a}=e;return(0,n.createElement)(C.A,{vertical:!0},(0,n.createElement)(i.Title,{text:t,className:"pt-item-container-title"}),(0,n.createElement)("div",{className:"pt-item-container"},a))},Q=e=>{const{number:t,icon:a,title:l}=e;return(0,n.createElement)(C.A,{className:"pt-number-card-container",vertical:!0,justify:"space-between",align:"start"},(0,n.createElement)(C.A,{gap:"middle",align:"center"},a,(0,n.createElement)(C.A,{vertical:!0,gap:"small",align:"start"},(0,n.createElement)(i.Text,{className:"pt-analytics-card-title",text:l,strong:!0,ellipsis:{tooltip:l}}),(0,n.createElement)(i.Text,{id:"pt-analytics-card-number",text:t}))))};var Z=a(54861),ee=a(428);const{RangePicker:te}=Z.A,{__:ae}=wp.i18n,ne=()=>{const{getAnalytics:e,getCampaigns:t}=k(),{setAnalyticsStates:a}=(0,r.useContext)(s);return(0,r.useEffect)((()=>{t()}),[]),(0,n.createElement)(T.A,{align:"middle",justify:"space-between",gutter:[15,15]},(0,n.createElement)(N.A,{lg:11},(0,n.createElement)(T.A,{align:"middle",justify:"space-between",gutter:[15,15]},(0,n.createElement)(N.A,{lg:6},(0,n.createElement)(i.Text,{className:"pt-analytics-top-title",text:ae("Analytics","poptics")})),(0,n.createElement)(N.A,{lg:18},(0,n.createElement)(i.SelectInput,{placeholder:ae("Select Campaign","poptics"),...!o()&&{notFoundContent:(0,n.createElement)(ee.A,{size:"small"})},options:o(),onChange:t=>{a((e=>({...e,campaignId:t}))),e({campaign_id:t})}})))),(0,n.createElement)(N.A,{lg:13},(0,n.createElement)(T.A,{align:"middle",gutter:[15,15],justify:{xs:"start",lg:"end"}},(0,n.createElement)(N.A,null,(0,n.createElement)(i.SelectInput,{placeholder:ae("This Month","poptics"),options:v,onChange:t=>{(t=>{a((e=>({...e,dateRange:t}))),e({date_range:t})})(t)}})),(0,n.createElement)(N.A,null,(0,n.createElement)(i.Text,{text:ae("Or select","poptics"),className:"pt-analytics-secondary-text"})),(0,n.createElement)(N.A,null,(0,n.createElement)(te,{placeholder:["DD/MM/YY","DD/MM/YY"],onChange:t=>{(t=>{const n=b(D,t[0].$d,t[1].$d);a((e=>({...e,dateRange:n}))),e({date_range:n})})(t)}})))))};var le=a(28073);const{__:ie}=wp.i18n,ce=e=>{const{typeOfHeading:t="icon",title:a}=e;return{textOnly:[{title:a,dataIndex:"item",key:"item",render:({name:e=""})=>(0,n.createElement)(C.A,{gap:"small",align:"center"},(0,n.createElement)(i.Text,{text:e,strong:!0})),fixed:"left",width:80},{title:ie("View","poptics"),dataIndex:"views",key:"views",width:70},{title:ie("Conversion","poptics"),dataIndex:"conversions",key:"conversions",width:90}],icon:[{title:a,dataIndex:"item",key:"item",render:({name:e="",icon:t})=>(0,n.createElement)(C.A,{gap:"small",align:"center"},t||null,(0,n.createElement)(i.Text,{text:e,strong:!0})),fixed:"left",width:80},{title:ie("views","poptics"),dataIndex:"views",key:"view",width:70},{title:ie("Conversion","poptics"),dataIndex:"conversions",key:"conversions",width:90}]}[t]};var re=a(97702);const{__:se}=wp.i18n,oe=({tableData:e})=>{const[t,a]=(0,r.useState)(!1),l=(0,n.createElement)("div",{className:"pt-upgrade-tooltip-content"},se(`Upgrade to Poptics PRO to Unlock ${e.title}  Statistics and get valuable insights!`,"poptics"));return(0,n.createElement)(N.A,{xs:24,xl:8,key:e.title},(0,n.createElement)(G,{title:e.title,item:(0,n.createElement)("div",{className:"pt-analytics-table-container"},(0,n.createElement)("div",{className:"pt-analytics-table-mask"},(0,n.createElement)(i.Table,{columns:ce(e.tableHeader),className:"pt-analytics-disabled-table",dataSource:[],pagination:!1}),(0,n.createElement)(le.A,{content:l,trigger:"hover",open:t,onOpenChange:e=>{a(e)}},(0,n.createElement)(i.Button,{"aria-label":se("upgrade button","poptics"),type:"primary",icon:(0,n.createElement)(re.A,null),className:"pt-table-pro-button"},se("Upgrade","poptics")))))}))},{__:me}=wp.i18n,pe=()=>{const{statisticalAnalysis:e}=(0,r.useContext)(s);return(0,n.createElement)(_.Ay,{theme:q._},(0,n.createElement)(C.A,{vertical:!0,gap:30},(0,n.createElement)(ne,null),(0,n.createElement)(T.A,{gutter:[16,20],justify:"space-between"},(0,n.createElement)(N.A,{span:24},(0,n.createElement)(T.A,{gutter:[16,20]},(()=>{const{cardViewData:e}=(0,r.useContext)(s);return e.map((e=>{let t;switch(e.title.toLowerCase()){case"visitor":t=(0,n.createElement)(c.VisitorIcon,null);break;case"views":t=(0,n.createElement)(c.ViewsIcon,null);break;case"conversion":t=(0,n.createElement)(c.ConversionIcon,null);break;case"conversion rate":t=(0,n.createElement)(c.ConversionRateIcon,null);break;default:t=null}return{...e,icon:t}}))})()?.map((e=>(0,n.createElement)(N.A,{xs:24,md:12,lg:6},(0,n.createElement)(Q,{number:e?.number,icon:e?.icon,title:e?.title}))))))),(0,n.createElement)(T.A,{gutter:[20,20]},(0,n.createElement)(N.A,{xs:24,xl:11},(0,n.createElement)(G,{title:me("Statistics","poptics"),item:(0,n.createElement)(z,{data:e})})),(0,n.createElement)(N.A,{xs:24,xl:13},(0,n.createElement)(i.Title,{text:me("Devices","poptics"),className:"pt-item-container-title"}),(0,n.createElement)(T.A,{gap:4,gutter:[20,20]},(()=>{const{pieDataDesktop:e,pieDataOthers:t,pieDataMobile:a}=(0,r.useContext)(s);return[{icon:c.DesktopIcon,text:__("Desktop","poptics"),data:u(e,m),backgroundColor:"#EFF6FF"},{icon:c.MobileIcon,text:__("Mobile","poptics"),data:u(a,p),backgroundColor:"#F0FDF4"},{icon:c.OthersDeviceIcon,text:__("Others","poptics"),data:u(t,d),backgroundColor:"#FAF5FF"}]})()?.map((e=>{const t=e.data.every((e=>0===e.value));return(0,n.createElement)(N.A,{xs:24,md:12,lg:8},(0,n.createElement)(X,{icon:e?.icon,text:e?.text,data:t?[...e?.data,{name:"No Data Available",value:100,fill:"#0000000F"}]:e?.data,backgroundColor:e?.backgroundColor}))}))))),(0,n.createElement)(T.A,{gutter:20},f.map((e=>(0,n.createElement)(oe,{tableData:e,key:e.title}))))))},{__:de}=wp.i18n,ue=(ge=()=>{const{getAnalytics:e}=k(),{cardViewData:t}=(0,r.useContext)(s);return(0,r.useEffect)((()=>{e()}),[]),(0,n.createElement)(i.RowSkeleton,{loading:!t},(0,n.createElement)(pe,null))},()=>{const[e,t]=(0,r.useState)({loading:null,campaignId:"",campaignList:null,dateRange:"",cardViewData:null,statisticalAnalysis:[],pieDataDesktop:null,pieDataOthers:null,pieDataMobile:null,countryBasedData:[],browserBasedData:[],pageBasedData:[]});return(0,n.createElement)(s.Provider,{value:{...e,setAnalyticsStates:t}},(0,n.createElement)(ge,null))});var ge}}]);